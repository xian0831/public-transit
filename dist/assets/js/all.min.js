"use strict";!function(){angular.module("transit-app",["ui.router"]),angular.module("transit-app").constant("WMATA_API_KEY","b8d72d4443d84c0a9acc8c6e4481a3b9")}(),function(){function t(t,e){var o=this;o.getSchedule=function(){var t=new Date,e=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();o.schedules=i(o.originationId,o.destinationId).filter(function(t){return t.origTime>=e&&t.origTime<"24:00:00"}),console.log(i(o.originationId,o.destinationId).filter(function(t){return t.origTime>=e}))},e.stops().then(function(t){return Papa.parse(t.data,{delimiter:",",header:!0}).data}).then(function(t){o.stops=t}),e.stopTimes().then(function(t){return Papa.parse(t.data,{delimiter:",",header:!0}).data}).then(function(e){o.stopTimes=e,t.log(o.stopTimes)});var i=function(t,e){for(var i,r,a,s=[],c=0,u=o.stopTimes.length;u>c;c++)t===o.stopTimes[c].stop_id?(i=o.stopTimes[c].trip_id,r=o.stopTimes[c].stop_sequence,a=o.stopTimes[c].arrival_time):e===o.stopTimes[c].stop_id&&i===o.stopTimes[c].trip_id&&r<o.stopTimes[c].stop_sequence&&(s.push({tripId:i,origTime:a,distTime:o.stopTimes[c].arrival_time,duration:n(a,o.stopTimes[c].arrival_time)}),console.log(i+" "+r+" "+o.stopTimes[c].stop_sequence));return s},n=function(t,e){var o=t.split(":"),i=e.split(":"),n=60*+i[0]+ +i[1]-(60*+o[0]+ +o[1]);return n}}angular.module("transit-app").controller("HomeController",t),t.$inject=["$log","localResourceService"]}(),function(){function t(t){function e(){return t.get("data/agency.json")}function o(){return t.get("data/rail_stops.txt")}function i(){return t.get("data/rail_stop_time.txt")}var n;return n={agency:e,stops:o,stopTimes:i}}angular.module("transit-app").factory("localResourceService",t),t.$inject=["$http"]}(),function(){function t(t,e){function o(){return e({method:"GET",url:"https://api.wmata.com/Rail.svc/json/jStations?LineCode=RD",headers:{api_key:"b8d72d4443d84c0a9acc8c6e4481a3b9"}})}var i;return i={stops:o}}angular.module("transit-app").factory("trainResourceService",t),t.$inject=["WMATA_API_KEY","$http"]}(),function(){function t(t,e){e.otherwise("/home"),t.state("home",{url:"/home",templateUrl:"app/partials/home/home.html",controller:"HomeController",controllerAs:"homeCtrl"}).state("about",{})}angular.module("transit-app").config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js",{scope:"/"}).then(function(t){console.log("Registration succeeded. Scope is "+t.scope)})["catch"](function(t){console.log("Registration failed with "+t)})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFsbC5taW4uanMiLCJhcHAubW9kdWxlLmpzIiwiaG9tZS9ob21lLmNvbnRyb2xsZXIuanMiLCJzZXJ2aWNlcy9sb2NhbHJlc291cmNlLnNlcnZpY2UuanMiLCJzZXJ2aWNlcy90cmFpbnJlc291cmNlLnNlcnZpY2UuanMiLCJhcHAucm91dGVzLmpzIiwianMvcmVnaXN0ZXJTVy5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uc3RhbnQiLCJIb21lQ29udHJvbGxlciIsIiRsb2ciLCJsb2NhbFJlc291cmNlU2VydmljZSIsInNlbGYiLCJ0aGlzIiwiZ2V0U2NoZWR1bGUiLCJkYXRlIiwiRGF0ZSIsImN1cnJlbnRUaW1lIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiZ2V0U2Vjb25kcyIsInNjaGVkdWxlcyIsImZpbmRWYWxpZFRyaXAiLCJvcmlnaW5hdGlvbklkIiwiZGVzdGluYXRpb25JZCIsImZpbHRlciIsInRyaXAiLCJvcmlnVGltZSIsImNvbnNvbGUiLCJsb2ciLCJzdG9wcyIsInRoZW4iLCJyZXNwb25zZSIsIlBhcGEiLCJwYXJzZSIsImRhdGEiLCJkZWxpbWl0ZXIiLCJoZWFkZXIiLCJzdG9wVGltZXMiLCJvcmlnSWQiLCJkaXN0SWQiLCJ0cmlwSWQiLCJvcmlnU2VxIiwidmFsaWRUcmlwcyIsImkiLCJsZW5ndGgiLCJzdG9wX2lkIiwidHJpcF9pZCIsInN0b3Bfc2VxdWVuY2UiLCJhcnJpdmFsX3RpbWUiLCJwdXNoIiwiZGlzdFRpbWUiLCJkdXJhdGlvbiIsImdldFRpbWVEaWZmIiwic3RhcnRUaW1lIiwiZW5kVGltZSIsInN0YXJ0VGltZXN0YW1wIiwic3BsaXQiLCJlbmRUaW1lc3RhbXAiLCJkaWZmIiwiY29udHJvbGxlciIsIiRpbmplY3QiLCIkaHR0cCIsImFnZW5jeSIsImdldCIsInJlc291cmNlIiwiZmFjdG9yeSIsInRyYWluUmVzb3VyY2VTZXJ2aWNlIiwiV01BVEFfQVBJX0tFWSIsIm1ldGhvZCIsInVybCIsImhlYWRlcnMiLCJhcGlfa2V5IiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlckFzIiwibmF2aWdhdG9yIiwic2VydmljZVdvcmtlciIsInJlZ2lzdGVyIiwic2NvcGUiLCJyZWciLCJlcnJvciJdLCJtYXBwaW5ncyI6IkFBQUEsY0NBQSxXQUdJQSxRQUNLQyxPQUFPLGVBQWdCLGNBRTVCRCxRQUNLQyxPQUFPLGVBQ1BDLFNBQVMsZ0JBQWdCLHVDQ0xsQyxXQVNJLFFBQVNDLEdBQWVDLEVBQU1DLEdBRTFCLEdBQUlDLEdBQU9DLElBRVhELEdBQUtFLFlBQWMsV0FDZixHQUFJQyxHQUFPLEdBQUlDLE1BQ1hDLEVBQWNGLEVBQUtHLFdBQVcsSUFBSUgsRUFBS0ksYUFBYSxJQUFJSixFQUFLSyxZQUNqRVIsR0FBS1MsVUFBWUMsRUFBY1YsRUFBS1csY0FBZVgsRUFBS1ksZUFBZUMsT0FBTyxTQUFTQyxHQUNuRixNQUFRQSxHQUFLQyxVQUFZVixHQUFlUyxFQUFLQyxTQUFXLGFBRTVEQyxRQUFRQyxJQUFJUCxFQUFjVixFQUFLVyxjQUFlWCxFQUFLWSxlQUFlQyxPQUFPLFNBQVNDLEdBQzlFLE1BQU9BLEdBQUtDLFVBQVlWLE1BS2hDTixFQUFxQm1CLFFBQVFDLEtBQUssU0FBU0MsR0FDdkMsTUFBT0MsTUFBS0MsTUFBTUYsRUFBU0csTUFDdkJDLFVBQVcsSUFDWEMsUUFBUSxJQUNURixPQUVKSixLQUFLLFNBQVNJLEdBQ2J2QixFQUFLa0IsTUFBUUssSUFHakJ4QixFQUFxQjJCLFlBQVlQLEtBQUssU0FBU0MsR0FDM0MsTUFBT0MsTUFBS0MsTUFBTUYsRUFBU0csTUFDdkJDLFVBQVcsSUFDWEMsUUFBUSxJQUNURixPQUVKSixLQUFLLFNBQVNJLEdBQ2J2QixFQUFLMEIsVUFBWUgsRUFDakJ6QixFQUFLbUIsSUFBSWpCLEVBQUswQixZQUdsQixJQUFJaEIsR0FBZ0IsU0FBVWlCLEVBQVFDLEdBTWxDLElBQUksR0FKQUMsR0FDQUMsRUFDQWYsRUFIQWdCLEtBS0lDLEVBQUksRUFBR0MsRUFBU2pDLEVBQUswQixVQUFVTyxPQUFZQSxFQUFKRCxFQUFZQSxJQUNwREwsSUFBVzNCLEVBQUswQixVQUFVTSxHQUFHRSxTQUM1QkwsRUFBUzdCLEVBQUswQixVQUFVTSxHQUFHRyxRQUMzQkwsRUFBVTlCLEVBQUswQixVQUFVTSxHQUFHSSxjQUM1QnJCLEVBQVdmLEVBQUswQixVQUFVTSxHQUFHSyxjQUN0QlQsSUFBVzVCLEVBQUswQixVQUFVTSxHQUFHRSxTQUNoQ0wsSUFBVzdCLEVBQUswQixVQUFVTSxHQUFHRyxTQUFXTCxFQUFVOUIsRUFBSzBCLFVBQVVNLEdBQUdJLGdCQUNwRUwsRUFBV08sTUFDUFQsT0FBU0EsRUFDVGQsU0FBVUEsRUFDVndCLFNBQVV2QyxFQUFLMEIsVUFBVU0sR0FBR0ssYUFDNUJHLFNBQVVDLEVBQVkxQixFQUFTZixFQUFLMEIsVUFBVU0sR0FBR0ssZ0JBR3JEckIsUUFBUUMsSUFBSVksRUFBUyxJQUFNQyxFQUFVLElBQU05QixFQUFLMEIsVUFBVU0sR0FBR0ksZUFNekUsT0FBT0wsSUFJUFUsRUFBYyxTQUFVQyxFQUFXQyxHQUNuQyxHQUFJQyxHQUFpQkYsRUFBVUcsTUFBTSxLQUNqQ0MsRUFBZUgsRUFBUUUsTUFBTSxLQUU3QkUsRUFBMkIsSUFBakJELEVBQWEsS0FBV0EsRUFBYSxJQUE2QixJQUFuQkYsRUFBZSxLQUFXQSxFQUFlLEdBSXRHLE9BQU9HLElBakZmckQsUUFDS0MsT0FBTyxlQUNQcUQsV0FBVyxpQkFBaUJuRCxHQUVqQ0EsRUFBZW9ELFNBQVcsT0FBTywyQkNQckMsV0FTSSxRQUFTbEQsR0FBcUJtRCxHQVExQixRQUFTQyxLQUNMLE1BQU9ELEdBQU1FLElBQUksb0JBR3JCLFFBQVNsQyxLQUNMLE1BQU9nQyxHQUFNRSxJQUFJLHVCQUdyQixRQUFTMUIsS0FDTCxNQUFPd0IsR0FBTUUsSUFBSSwyQkFoQnJCLEdBQUlDLEVBbUJKLE9BbEJBQSxJQUNJRixPQUFRQSxFQUNSakMsTUFBT0EsRUFDUFEsVUFBV0EsR0FYbkJoQyxRQUNLQyxPQUFPLGVBQ1AyRCxRQUFRLHVCQUF1QnZELEdBRXBDQSxFQUFxQmtELFNBQVcsWUNQcEMsV0FTSSxRQUFTTSxHQUFxQkMsRUFBY04sR0FPeEMsUUFBU2hDLEtBQ0wsTUFBUWdDLElBQ0pPLE9BQVEsTUFDUkMsSUFBSyw0REFDTEMsU0FBVUMsUUFBVyxzQ0FWN0IsR0FBSVAsRUFnQkosT0FkQUEsSUFDSW5DLE1BQVFBLEdBVmhCeEIsUUFDS0MsT0FBTyxlQUNQMkQsUUFBUSx1QkFBdUJDLEdBRXBDQSxFQUFxQk4sU0FBVyxnQkFBZ0IsWUNWcEQsV0FTSSxRQUFTWSxHQUFPQyxFQUFnQkMsR0FDNUJBLEVBQW1CQyxVQUFVLFNBRTdCRixFQUNLRyxNQUFNLFFBQ0hQLElBQUssUUFDTFEsWUFBYSw4QkFDYmxCLFdBQVksaUJBQ1ptQixhQUFjLGFBR2pCRixNQUFNLFlBakJmdkUsUUFDS0MsT0FBTyxlQUNQa0UsT0FBT0EsR0FFWkEsRUFBT1osU0FBVyxpQkFBa0IseUJDSnhDLFdBRVEsaUJBQW1CbUIsWUFDbkJBLFVBQVVDLGNBQWNDLFNBQVMsVUFBWUMsTUFBTyxNQUFPcEQsS0FBSyxTQUFTcUQsR0FFckV4RCxRQUFRQyxJQUFJLG9DQUFzQ3VELEVBQUlELFNBRjFESCxTQUdTLFNBQVNLLEdBRWR6RCxRQUFRQyxJQUFJLDRCQUE4QndEIiwiZmlsZSI6ImFsbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ3RyYW5zaXQtYXBwJywgWyd1aS5yb3V0ZXInXSk7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgndHJhbnNpdC1hcHAnKS5jb25zdGFudCgnV01BVEFfQVBJX0tFWScsICdiOGQ3MmQ0NDQzZDg0YzBhOWFjYzhjNmU0NDgxYTNiOScpO1xufSkoKTtcbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBDcmVhdGVkIGJ5IGFuZHJldyBvbiAzLzIzLzE2LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCd0cmFuc2l0LWFwcCcpLmNvbnRyb2xsZXIoJ0hvbWVDb250cm9sbGVyJywgSG9tZUNvbnRyb2xsZXIpO1xuXG4gICAgSG9tZUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGxvZycsICdsb2NhbFJlc291cmNlU2VydmljZSddO1xuXG4gICAgZnVuY3Rpb24gSG9tZUNvbnRyb2xsZXIoJGxvZywgbG9jYWxSZXNvdXJjZVNlcnZpY2UpIHtcblxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgc2VsZi5nZXRTY2hlZHVsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50VGltZSA9IGRhdGUuZ2V0SG91cnMoKSArICc6JyArIGRhdGUuZ2V0TWludXRlcygpICsgJzonICsgZGF0ZS5nZXRTZWNvbmRzKCk7XG4gICAgICAgICAgICBzZWxmLnNjaGVkdWxlcyA9IGZpbmRWYWxpZFRyaXAoc2VsZi5vcmlnaW5hdGlvbklkLCBzZWxmLmRlc3RpbmF0aW9uSWQpLmZpbHRlcihmdW5jdGlvbiAodHJpcCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cmlwLm9yaWdUaW1lID49IGN1cnJlbnRUaW1lICYmIHRyaXAub3JpZ1RpbWUgPCAnMjQ6MDA6MDAnO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhmaW5kVmFsaWRUcmlwKHNlbGYub3JpZ2luYXRpb25JZCwgc2VsZi5kZXN0aW5hdGlvbklkKS5maWx0ZXIoZnVuY3Rpb24gKHRyaXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJpcC5vcmlnVGltZSA+PSBjdXJyZW50VGltZTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcblxuICAgICAgICBsb2NhbFJlc291cmNlU2VydmljZS5zdG9wcygpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXR1cm4gUGFwYS5wYXJzZShyZXNwb25zZS5kYXRhLCB7XG4gICAgICAgICAgICAgICAgZGVsaW1pdGVyOiAnLCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyOiB0cnVlXG4gICAgICAgICAgICB9KS5kYXRhO1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBzZWxmLnN0b3BzID0gZGF0YTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbG9jYWxSZXNvdXJjZVNlcnZpY2Uuc3RvcFRpbWVzKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBQYXBhLnBhcnNlKHJlc3BvbnNlLmRhdGEsIHtcbiAgICAgICAgICAgICAgICBkZWxpbWl0ZXI6ICcsJyxcbiAgICAgICAgICAgICAgICBoZWFkZXI6IHRydWVcbiAgICAgICAgICAgIH0pLmRhdGE7XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHNlbGYuc3RvcFRpbWVzID0gZGF0YTtcbiAgICAgICAgICAgICRsb2cubG9nKHNlbGYuc3RvcFRpbWVzKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGZpbmRWYWxpZFRyaXAgPSBmdW5jdGlvbiBmaW5kVmFsaWRUcmlwKG9yaWdJZCwgZGlzdElkKSB7XG4gICAgICAgICAgICB2YXIgdmFsaWRUcmlwcyA9IFtdO1xuICAgICAgICAgICAgdmFyIHRyaXBJZDtcbiAgICAgICAgICAgIHZhciBvcmlnU2VxO1xuICAgICAgICAgICAgdmFyIG9yaWdUaW1lO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gc2VsZi5zdG9wVGltZXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAob3JpZ0lkID09PSBzZWxmLnN0b3BUaW1lc1tpXS5zdG9wX2lkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyaXBJZCA9IHNlbGYuc3RvcFRpbWVzW2ldLnRyaXBfaWQ7XG4gICAgICAgICAgICAgICAgICAgIG9yaWdTZXEgPSBzZWxmLnN0b3BUaW1lc1tpXS5zdG9wX3NlcXVlbmNlO1xuICAgICAgICAgICAgICAgICAgICBvcmlnVGltZSA9IHNlbGYuc3RvcFRpbWVzW2ldLmFycml2YWxfdGltZTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRpc3RJZCA9PT0gc2VsZi5zdG9wVGltZXNbaV0uc3RvcF9pZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHJpcElkID09PSBzZWxmLnN0b3BUaW1lc1tpXS50cmlwX2lkICYmIG9yaWdTZXEgPCBzZWxmLnN0b3BUaW1lc1tpXS5zdG9wX3NlcXVlbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZFRyaXBzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaXBJZDogdHJpcElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdUaW1lOiBvcmlnVGltZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0VGltZTogc2VsZi5zdG9wVGltZXNbaV0uYXJyaXZhbF90aW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBnZXRUaW1lRGlmZihvcmlnVGltZSwgc2VsZi5zdG9wVGltZXNbaV0uYXJyaXZhbF90aW1lKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRyaXBJZCArICcgJyArIG9yaWdTZXEgKyAnICcgKyBzZWxmLnN0b3BUaW1lc1tpXS5zdG9wX3NlcXVlbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHZhbGlkVHJpcHM7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy9UbyBiZSBjb21wbGV0ZWRcbiAgICAgICAgdmFyIGdldFRpbWVEaWZmID0gZnVuY3Rpb24gZ2V0VGltZURpZmYoc3RhcnRUaW1lLCBlbmRUaW1lKSB7XG4gICAgICAgICAgICB2YXIgc3RhcnRUaW1lc3RhbXAgPSBzdGFydFRpbWUuc3BsaXQoJzonKTtcbiAgICAgICAgICAgIHZhciBlbmRUaW1lc3RhbXAgPSBlbmRUaW1lLnNwbGl0KCc6Jyk7XG5cbiAgICAgICAgICAgIHZhciBkaWZmID0gK2VuZFRpbWVzdGFtcFswXSAqIDYwICsgK2VuZFRpbWVzdGFtcFsxXSAtICgrc3RhcnRUaW1lc3RhbXBbMF0gKiA2MCArICtzdGFydFRpbWVzdGFtcFsxXSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkaWZmO1xuICAgICAgICB9O1xuICAgIH1cbn0pKCk7XG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ3JlYXRlZCBieSBhbmRyZXcgb24gMy8xNy8xNi5cbiAqL1xuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgndHJhbnNpdC1hcHAnKS5mYWN0b3J5KCdsb2NhbFJlc291cmNlU2VydmljZScsIGxvY2FsUmVzb3VyY2VTZXJ2aWNlKTtcblxuICAgIGxvY2FsUmVzb3VyY2VTZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJ107XG5cbiAgICBmdW5jdGlvbiBsb2NhbFJlc291cmNlU2VydmljZSgkaHR0cCkge1xuICAgICAgICB2YXIgcmVzb3VyY2U7XG4gICAgICAgIHJlc291cmNlID0ge1xuICAgICAgICAgICAgYWdlbmN5OiBhZ2VuY3ksXG4gICAgICAgICAgICBzdG9wczogc3RvcHMsXG4gICAgICAgICAgICBzdG9wVGltZXM6IHN0b3BUaW1lc1xuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGFnZW5jeSgpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJ2RhdGEvYWdlbmN5Lmpzb24nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHN0b3BzKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnZGF0YS9yYWlsX3N0b3BzLnR4dCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc3RvcFRpbWVzKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnZGF0YS9yYWlsX3N0b3BfdGltZS50eHQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXNvdXJjZTtcbiAgICB9XG59KSgpO1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIENyZWF0ZWQgYnkgYW5kcmV3IG9uIDQvMTQvMTYuXG4gKi9cbihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ3RyYW5zaXQtYXBwJykuZmFjdG9yeSgndHJhaW5SZXNvdXJjZVNlcnZpY2UnLCB0cmFpblJlc291cmNlU2VydmljZSk7XG5cbiAgICB0cmFpblJlc291cmNlU2VydmljZS4kaW5qZWN0ID0gWydXTUFUQV9BUElfS0VZJywgJyRodHRwJ107XG5cbiAgICBmdW5jdGlvbiB0cmFpblJlc291cmNlU2VydmljZShXTUFUQV9BUElfS0VZLCAkaHR0cCkge1xuICAgICAgICB2YXIgcmVzb3VyY2U7XG5cbiAgICAgICAgcmVzb3VyY2UgPSB7XG4gICAgICAgICAgICBzdG9wczogc3RvcHNcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBzdG9wcygpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICB1cmw6ICdodHRwczovL2FwaS53bWF0YS5jb20vUmFpbC5zdmMvanNvbi9qU3RhdGlvbnM/TGluZUNvZGU9UkQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ2FwaV9rZXknOiAnYjhkNzJkNDQ0M2Q4NGMwYTlhY2M4YzZlNDQ4MWEzYjknIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc291cmNlO1xuICAgIH1cbn0pKCk7XG4ndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ3RyYW5zaXQtYXBwJykuY29uZmlnKGNvbmZpZyk7XG5cbiAgICBjb25maWcuJGluamVjdCA9IFsnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJ107XG5cbiAgICBmdW5jdGlvbiBjb25maWcoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xuICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvaG9tZScpO1xuXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdob21lJywge1xuICAgICAgICAgICAgdXJsOiAnL2hvbWUnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvcGFydGlhbHMvaG9tZS9ob21lLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0hvbWVDb250cm9sbGVyJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ2hvbWVDdHJsJ1xuICAgICAgICB9KS5zdGF0ZSgnYWJvdXQnLCB7fSk7XG4gICAgfVxufSkoKTtcbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBDcmVhdGVkIGJ5IGFuZHJldyBvbiAzLzE1LzE2LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSB7XG4gICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKCcvc3cuanMnLCB7IHNjb3BlOiAnLycgfSkudGhlbihmdW5jdGlvbiAocmVnKSB7XG4gICAgICAgICAgICAvLyByZWdpc3RyYXRpb24gd29ya2VkXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUmVnaXN0cmF0aW9uIHN1Y2NlZWRlZC4gU2NvcGUgaXMgJyArIHJlZy5zY29wZSk7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgLy8gcmVnaXN0cmF0aW9uIGZhaWxlZFxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1JlZ2lzdHJhdGlvbiBmYWlsZWQgd2l0aCAnICsgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3RyYW5zaXQtYXBwJywgWyd1aS5yb3V0ZXInXSk7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3RyYW5zaXQtYXBwJylcbiAgICAgICAgLmNvbnN0YW50KCdXTUFUQV9BUElfS0VZJywnYjhkNzJkNDQ0M2Q4NGMwYTlhY2M4YzZlNDQ4MWEzYjknKTtcbn0pKCk7XG4iLCIvKipcbiAqIENyZWF0ZWQgYnkgYW5kcmV3IG9uIDMvMjMvMTYuXG4gKi9cbihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3RyYW5zaXQtYXBwJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0hvbWVDb250cm9sbGVyJyxIb21lQ29udHJvbGxlcik7XG5cbiAgICBIb21lQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9nJywnbG9jYWxSZXNvdXJjZVNlcnZpY2UnXTtcblxuICAgIGZ1bmN0aW9uIEhvbWVDb250cm9sbGVyKCRsb2csIGxvY2FsUmVzb3VyY2VTZXJ2aWNlKSB7XG5cbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHNlbGYuZ2V0U2NoZWR1bGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50VGltZSA9IGRhdGUuZ2V0SG91cnMoKSsnOicrZGF0ZS5nZXRNaW51dGVzKCkrJzonK2RhdGUuZ2V0U2Vjb25kcygpO1xuICAgICAgICAgICAgc2VsZi5zY2hlZHVsZXMgPSBmaW5kVmFsaWRUcmlwKHNlbGYub3JpZ2luYXRpb25JZCwgc2VsZi5kZXN0aW5hdGlvbklkKS5maWx0ZXIoZnVuY3Rpb24odHJpcCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuICh0cmlwLm9yaWdUaW1lID49IGN1cnJlbnRUaW1lICYmIHRyaXAub3JpZ1RpbWUgPCAnMjQ6MDA6MDAnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZmluZFZhbGlkVHJpcChzZWxmLm9yaWdpbmF0aW9uSWQsIHNlbGYuZGVzdGluYXRpb25JZCkuZmlsdGVyKGZ1bmN0aW9uKHRyaXApe1xuICAgICAgICAgICAgICAgIHJldHVybiB0cmlwLm9yaWdUaW1lID49IGN1cnJlbnRUaW1lO1xuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgbG9jYWxSZXNvdXJjZVNlcnZpY2Uuc3RvcHMoKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgIHJldHVybiBQYXBhLnBhcnNlKHJlc3BvbnNlLmRhdGEse1xuICAgICAgICAgICAgICAgIGRlbGltaXRlcjogJywnLFxuICAgICAgICAgICAgICAgIGhlYWRlcjogdHJ1ZVxuICAgICAgICAgICAgfSkuZGF0YTtcblxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgc2VsZi5zdG9wcyA9IGRhdGE7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxvY2FsUmVzb3VyY2VTZXJ2aWNlLnN0b3BUaW1lcygpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgcmV0dXJuIFBhcGEucGFyc2UocmVzcG9uc2UuZGF0YSx7XG4gICAgICAgICAgICAgICAgZGVsaW1pdGVyOiAnLCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyOiB0cnVlXG4gICAgICAgICAgICB9KS5kYXRhO1xuXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICBzZWxmLnN0b3BUaW1lcyA9IGRhdGE7XG4gICAgICAgICAgICAkbG9nLmxvZyhzZWxmLnN0b3BUaW1lcyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBmaW5kVmFsaWRUcmlwID0gZnVuY3Rpb24gKG9yaWdJZCwgZGlzdElkKSB7XG4gICAgICAgICAgICB2YXIgdmFsaWRUcmlwcyA9IFtdO1xuICAgICAgICAgICAgdmFyIHRyaXBJZDtcbiAgICAgICAgICAgIHZhciBvcmlnU2VxO1xuICAgICAgICAgICAgdmFyIG9yaWdUaW1lO1xuXG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwLCBsZW5ndGggPSBzZWxmLnN0b3BUaW1lcy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgaWYob3JpZ0lkID09PSBzZWxmLnN0b3BUaW1lc1tpXS5zdG9wX2lkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyaXBJZCA9IHNlbGYuc3RvcFRpbWVzW2ldLnRyaXBfaWQ7XG4gICAgICAgICAgICAgICAgICAgIG9yaWdTZXEgPSBzZWxmLnN0b3BUaW1lc1tpXS5zdG9wX3NlcXVlbmNlO1xuICAgICAgICAgICAgICAgICAgICBvcmlnVGltZSA9IHNlbGYuc3RvcFRpbWVzW2ldLmFycml2YWxfdGltZTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRpc3RJZCA9PT0gc2VsZi5zdG9wVGltZXNbaV0uc3RvcF9pZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHJpcElkID09PSBzZWxmLnN0b3BUaW1lc1tpXS50cmlwX2lkICYmIG9yaWdTZXEgPCBzZWxmLnN0b3BUaW1lc1tpXS5zdG9wX3NlcXVlbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZFRyaXBzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaXBJZCA6IHRyaXBJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnVGltZTogb3JpZ1RpbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzdFRpbWU6IHNlbGYuc3RvcFRpbWVzW2ldLmFycml2YWxfdGltZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogZ2V0VGltZURpZmYob3JpZ1RpbWUsc2VsZi5zdG9wVGltZXNbaV0uYXJyaXZhbF90aW1lKVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRyaXBJZCArICcgJyArIG9yaWdTZXEgKyAnICcgKyBzZWxmLnN0b3BUaW1lc1tpXS5zdG9wX3NlcXVlbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdmFsaWRUcmlwcztcbiAgICAgICAgfTtcblxuICAgICAgICAvL1RvIGJlIGNvbXBsZXRlZFxuICAgICAgICB2YXIgZ2V0VGltZURpZmYgPSBmdW5jdGlvbiAoc3RhcnRUaW1lLCBlbmRUaW1lKSB7XG4gICAgICAgICAgICB2YXIgc3RhcnRUaW1lc3RhbXAgPSBzdGFydFRpbWUuc3BsaXQoJzonKTtcbiAgICAgICAgICAgIHZhciBlbmRUaW1lc3RhbXAgPSBlbmRUaW1lLnNwbGl0KCc6Jyk7XG5cbiAgICAgICAgICAgIHZhciBkaWZmID0gKCgrZW5kVGltZXN0YW1wWzBdKSo2MCArICgrZW5kVGltZXN0YW1wWzFdKSkgLSAoKCtzdGFydFRpbWVzdGFtcFswXSkqNjAgKyAoK3N0YXJ0VGltZXN0YW1wWzFdKSk7XG5cblxuXG4gICAgICAgICAgICByZXR1cm4gZGlmZjtcbiAgICAgICAgfTtcblxuXG5cbiAgICB9XG5cbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGFuZHJldyBvbiAzLzE3LzE2LlxuICovXG4oZnVuY3Rpb24oKXtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3RyYW5zaXQtYXBwJylcbiAgICAgICAgLmZhY3RvcnkoJ2xvY2FsUmVzb3VyY2VTZXJ2aWNlJyxsb2NhbFJlc291cmNlU2VydmljZSk7XG5cbiAgICBsb2NhbFJlc291cmNlU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCddO1xuXG4gICAgZnVuY3Rpb24gbG9jYWxSZXNvdXJjZVNlcnZpY2UoJGh0dHApIHtcbiAgICAgICAgdmFyIHJlc291cmNlO1xuICAgICAgICByZXNvdXJjZSA9IHtcbiAgICAgICAgICAgIGFnZW5jeTogYWdlbmN5LFxuICAgICAgICAgICAgc3RvcHM6IHN0b3BzLFxuICAgICAgICAgICAgc3RvcFRpbWVzOiBzdG9wVGltZXNcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBhZ2VuY3koKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCdkYXRhL2FnZW5jeS5qc29uJyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzdG9wcygpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJ2RhdGEvcmFpbF9zdG9wcy50eHQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHN0b3BUaW1lcygpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJ2RhdGEvcmFpbF9zdG9wX3RpbWUudHh0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzb3VyY2U7XG4gICAgfVxufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgYW5kcmV3IG9uIDQvMTQvMTYuXG4gKi9cbihmdW5jdGlvbigpe1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgndHJhbnNpdC1hcHAnKVxuICAgICAgICAuZmFjdG9yeSgndHJhaW5SZXNvdXJjZVNlcnZpY2UnLHRyYWluUmVzb3VyY2VTZXJ2aWNlKTtcblxuICAgIHRyYWluUmVzb3VyY2VTZXJ2aWNlLiRpbmplY3QgPSBbJ1dNQVRBX0FQSV9LRVknLCckaHR0cCddO1xuXG4gICAgZnVuY3Rpb24gdHJhaW5SZXNvdXJjZVNlcnZpY2UoV01BVEFfQVBJX0tFWSwkaHR0cCkge1xuICAgICAgICB2YXIgcmVzb3VyY2U7XG5cbiAgICAgICAgcmVzb3VyY2UgPSB7XG4gICAgICAgICAgICBzdG9wcyA6IHN0b3BzXG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gc3RvcHMoKSB7XG4gICAgICAgICAgICByZXR1cm4gICRodHRwKHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vYXBpLndtYXRhLmNvbS9SYWlsLnN2Yy9qc29uL2pTdGF0aW9ucz9MaW5lQ29kZT1SRCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogeydhcGlfa2V5JzogJ2I4ZDcyZDQ0NDNkODRjMGE5YWNjOGM2ZTQ0ODFhM2I5J31cbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXNvdXJjZTtcbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCd0cmFuc2l0LWFwcCcpXG4gICAgICAgIC5jb25maWcoY29uZmlnKTtcblxuICAgIGNvbmZpZy4kaW5qZWN0ID0gWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInXTtcblxuICAgIGZ1bmN0aW9uIGNvbmZpZygkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XG4gICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9ob21lJyk7XG5cbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC5zdGF0ZSgnaG9tZScsIHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvaG9tZScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvcGFydGlhbHMvaG9tZS9ob21lLmh0bWwnLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdIb21lQ29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAnaG9tZUN0cmwnXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAuc3RhdGUoJ2Fib3V0Jywge30pO1xuXG4gICAgfVxufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgYW5kcmV3IG9uIDMvMTUvMTYuXG4gKi9cbihmdW5jdGlvbigpe1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBpZiAoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcikge1xuICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcignL3N3LmpzJywgeyBzY29wZTogJy8nIH0pLnRoZW4oZnVuY3Rpb24ocmVnKSB7XG4gICAgICAgICAgICAvLyByZWdpc3RyYXRpb24gd29ya2VkXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUmVnaXN0cmF0aW9uIHN1Y2NlZWRlZC4gU2NvcGUgaXMgJyArIHJlZy5zY29wZSk7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICAvLyByZWdpc3RyYXRpb24gZmFpbGVkXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUmVnaXN0cmF0aW9uIGZhaWxlZCB3aXRoICcgKyBlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH1cbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
